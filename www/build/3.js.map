{"version":3,"sources":["../../src/pages/popover/popover.ts","../../src/pages/popover/popover.module.ts"],"names":[],"mappings":"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","file":"3.js","sourcesContent":["import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, ViewController, ToastController, LoadingController} from 'ionic-angular';\n\nimport { commentProvider } from '../../providers/comment.service';\nimport { NativeStorage } from '@ionic-native/native-storage';\n\n/**\n * Generated class for the PopoverPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage({\n  name: 'PopoverPage'\n})\n@Component({\n  selector: 'page-popover',\n  templateUrl: 'popover.html',\n})\nexport class PopoverPage {\n  rate: any;\n  public token_api: any;\n  public id: any;\n  public type: any;\n  public comment: any;\n  public comment_id: any;\n  public result: any;\n  public rateResult: any;\n\n  constructor(public navCtrl: NavController, \n    public navParams: NavParams,\n    public viewCtrl: ViewController,\n    public loadingCtrl: LoadingController,\n    public toastCtrl: ToastController,\n    private nativeStorage: NativeStorage,\n    public commentProvider: commentProvider) {\n\n      this.nativeStorage.getItem('myitem')\n      .then(\n        data =>{\n          this.token_api = data.token_api;\n      })\n     \n      this.type = navParams.get('type');\n      this.id = navParams.get('id');\n\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad PopoverPage');\n  }\n\n  addComment(){\n\n    if(this.comment === undefined){\n        let toast = this.toastCtrl.create({\n          message: \"قم بادخال تعليق\",\n          duration: 3000,\n          position: 'bottom'\n        }); toast.present();\n    }\n\n    else{\n\n      let loader = this.loadingCtrl.create({\n        spinner: 'crescent',\n        content: ''\n      });\n  \n      loader.present().then(() => {\n\n        this.commentProvider.add_comment(this.token_api, this.id, this.type, this.comment)\n        .then( result =>{\n          \n          this.result = JSON.parse(result.data);\n         \n          if(this.result.status_code === 200){\n\n            this.comment_id = this.result.comment_id;\n            this.commentProvider.add_rate(this.token_api, this.id, this.type, this.rate, this.comment_id)\n            .then( result =>{\n\n              this.rateResult = JSON.parse(result.data);\n              if(this.rateResult.status_code === 200){\n                loader.dismiss();\n                this.viewCtrl.dismiss();\n                let toast = this.toastCtrl.create({\n                  message: \"تم اضافة تقييمك\",\n                  duration: 3000,\n                  position: 'bottom'\n                }); toast.present();\n              }\n\n              else{\n                let toast = this.toastCtrl.create({\n                  message: \"Please Check you internet connection\",\n                  duration: 3000,\n                  position: 'bottom'\n                }); toast.present();\n              }\n\n            })\n          }\n\n          else if( this.result.status_code === 402){\n\n            loader.dismiss();\n            let toast = this.toastCtrl.create({\n              message: \"Please insert valid comment\",\n              duration: 3000,\n              position: 'bottom'\n            }); toast.present();\n          }\n\n          else{\n\n            loader.dismiss();\n            let toast = this.toastCtrl.create({\n              message: \"Please check your internet connection\",\n              duration: 3000,\n              position: 'bottom'\n            }); toast.present();\n          }\n\n        }).catch(error => {\n          loader.dismiss();\n          let toast = this.toastCtrl.create({\n            message: \"Please Check you internet connection\",\n            duration: 3000,\n            position: 'bottom'\n          }); toast.present();\n        });\n      })\n    }\n    \n  }\n\n  saveUserRating(e) {\n    //alert(\"rate\" + this.rate);\n    /*\n\n    this.commentProvider.add_rate(this.token_api, this.id, this.type, e)\n    .subscribe( result =>{\n      //alert(JSON.stringify(result));\n      if(result.status_code === 200){\n        let toast = this.toastCtrl.create({\n          message: \"تم اضافة تقييمك\",\n          duration: 3000,\n          position: 'bottom'\n        }); toast.present();\n      }\n      else{\n        let toast = this.toastCtrl.create({\n          message: \"Please Check you internet connection\",\n          duration: 3000,\n          position: 'bottom'\n        }); toast.present();\n      }\n    }), err=>{\n      //alert(JSON.stringify(err));\n      let toast = this.toastCtrl.create({\n        message: \"Please Check you internet connection\",\n        duration: 3000,\n        position: 'bottom'\n      }); toast.present();\n    }*/\n    \n  }\n\n  close() {\n    this.viewCtrl.dismiss();\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/popover/popover.ts","import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { PopoverPage } from './popover';\nimport { Ionic2RatingModule } from 'ionic2-rating';\n\n@NgModule({\n  declarations: [\n    PopoverPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(PopoverPage),\n    Ionic2RatingModule\n  ],\n})\nexport class PopoverPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/popover/popover.module.ts"],"sourceRoot":""}