{"version":3,"sources":["../../src/pages/sign-up/sign-up.ts","../../src/pages/sign-up/sign-up.module.ts"],"names":[],"mappings":"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","file":"1.js","sourcesContent":["import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, ToastController, LoadingController, MenuController} from 'ionic-angular';\nimport { FormBuilder, FormGroup, Validators, AbstractControl } from '@angular/forms';\nimport {TabsPage, TabIconTextPage} from '../tabs/tabs.page';\n\nimport { registerProvider } from '../../providers/register';\nimport { FCM } from '@ionic-native/fcm';\nimport { NativeStorage } from '@ionic-native/native-storage';\nimport { HTTP, HTTPResponse } from '@ionic-native/http';\n\n/**\n * Generated class for the SignUpPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage({\n  name: 'SignUpPage'\n})\n@Component({\n  selector: 'page-sign-up',\n  templateUrl: 'sign-up.html',\n})\nexport class SignUpPage {\n  public phoneNumber: string;\n  public token_api: any;\n  public id: any;\n  registerForm: FormGroup;\n  submitAttempt: boolean = false;\n\n  usernameFormName: AbstractControl;\n  phone: AbstractControl;\n  code: AbstractControl;\n  email: AbstractControl;\n\n  public username: string;\n  public phoneNum: any;\n  public codeNum: any;\n  public emailText: any;\n  public confirmationResult: any;\n  public data: any;\n  public result : any;\n\n  constructor(public navCtrl: NavController, \n    public menu: MenuController,\n    public navParams: NavParams, \n    public toastCtrl: ToastController,\n    public formBuilder: FormBuilder,\n    public loadingCtrl: LoadingController,\n    public registerProvider: registerProvider,\n    private fcm: FCM,\n    private nativeStorage: NativeStorage) {\n\n      this.menu.enable(false, 'menu');\n\n      //this.userNameParam = navParams.get('userNameParam'); \n      this.registerForm = formBuilder.group({\n        usernameFormName: ['', Validators.compose([Validators.minLength(1), Validators.required])],\n        phone: ['', Validators.compose([Validators.minLength(7), Validators.required])],\n        code: ['', Validators.compose([Validators.minLength(2), Validators.required])],\n        email: ['', Validators.compose([Validators.minLength(10), Validators.required])]\n    });\n    this.usernameFormName = this.registerForm.controls['usernameFormName'];\n    this.phone = this.registerForm.controls['phone'];\n    this.code = this.registerForm.controls['code'];\n    this.email = this.registerForm.controls['email'];\n  }\n\n  ionViewDidLoad() {}\n\n  signup(code, phone, email){\n\n    if(!this.registerForm.valid){\n      this.submitAttempt = true;\n  } else {\n\n\n    let loader = this.loadingCtrl.create({\n      spinner: 'crescent',\n      content: ''\n    });\n\n    loader.present().then(() => {\n\n        this.submitAttempt = false;\n        const phoneNumberString = code+phone;\n\n        this.fcm.getToken().then(token=>{\n\n          if(token){\n\n            this.registerProvider.register(this.username, phoneNumberString, token, email)\n            .then(result =>{\n\n              this.result = JSON.parse(result.data);\n        \n            if(this.result.status_code === 200){\n\n              this.nativeStorage.setItem('myitem', {token_api : this.result.token_api, id: this.result.id})\n              .then(\n                () =>{\n                  //console.log('Stored item!');\n                  loader.dismiss();\n                  this.navCtrl.pop();\n                },\n                  error => {\n\n                    //alert(\"not stored \" + JSON.stringify( error));\n                    \n                    loader.dismiss();\n                    let toast = this.toastCtrl.create({\n                      message: \"Please check your internet connection and try again\",\n                      duration: 3000,\n                      position: 'bottom'\n                    }); toast.present();\n                  }\n                );\n                /*\n                 this.navCtrl.push('SignUpVerifyPage',{\n                    verification: this.result.verification,\n                    token_api: this.result.token_api,\n                    id: this.result.id\n                  });*/\n                  \n              }\n              else{\n                loader.dismiss();\n                let toast = this.toastCtrl.create({\n                  message: \"Please enter valid data\",\n                  duration: 3000,\n                  position: 'bottom'\n                }); toast.present();\n              }\n\n            }).catch(error => {\n              \n              loader.dismiss();\n              let toast = this.toastCtrl.create({\n                message: \"Please check your internet connection and try again\",\n                duration: 3000,\n                position: 'bottom'\n              }); toast.present();\n            });\n          }\n        })\n        err=>{\n          loader.dismiss();\n          let toast = this.toastCtrl.create({\n            message: \"Please check your internet connection and try again\",\n            duration: 3000,\n            position: 'bottom'\n          }); toast.present();\n        }\n      })\n    }\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/sign-up/sign-up.ts","import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { SignUpPage } from './sign-up';\n\n@NgModule({\n  declarations: [\n    SignUpPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(SignUpPage),\n  ],\n})\nexport class SignUpPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/sign-up/sign-up.module.ts"],"sourceRoot":""}